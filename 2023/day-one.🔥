fn main() raises:
    let part_one_test_input = "inputs/day-one-test.txt"
    let input = "inputs/day-one.txt"
    let part_one_solution = part_one(input)
    print("Part One Solution:", part_one_solution)

    let part_two_test_input = "inputs/day-one-test-2.txt"
    let part_two_solution = part_two(part_two_test_input)
    print("Part Two Solution:", part_two_solution)


fn part_one(input_path: String) raises -> Int:
    let f = open(input_path, "r")
    let input = f.read()
    let lines = input.split("\n")

    var sum: Int = 0
    for i in range(len(lines)):
        let line = lines[i]

        var first_digit_set = False
        var last_digit_set = False
        var first_digit_string = String()
        var last_digit_string = String()

        for j in range(len(line)):
            let c = line[j]
            if isdigit(ord(c)):
                if first_digit_set:
                    last_digit_string = atol(c)
                    last_digit_set = True
                else:
                    first_digit_string = atol(c)
                    first_digit_set = True

        var num = Int()
        if first_digit_set and not last_digit_set:
            num = atol(first_digit_string + first_digit_string)
        else:
            num = atol(first_digit_string + last_digit_string)

        sum += num

        first_digit_set = False
        last_digit_set = False
        first_digit_string = String()
        last_digit_string = String()

    return sum


fn part_two(input_path: String) raises -> Int:
    let f = open(input_path, "r")
    let input = f.read()
    let lines = input.split("\n")

    var sum: Int = 0
    for i in range(len(lines)):
        let line = lines[i]

        var first_digit_set = False
        var last_digit_set = False
        var first_digit_string = String()
        var last_digit_string = String()

        for j in range(len(line)):
            let c = line[j]
            if isdigit(ord(c)):
                if first_digit_set:
                    last_digit_string = atol(c)
                    last_digit_set = True
                else:
                    first_digit_string = atol(c)
                    first_digit_set = True

        var num = Int()
        if first_digit_set and not last_digit_set:
            num = atol(first_digit_string + first_digit_string)
        else:
            num = atol(first_digit_string + last_digit_string)

        sum += num

        first_digit_set = False
        last_digit_set = False
        first_digit_string = String()
        last_digit_string = String()

    return sum
